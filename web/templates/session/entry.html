{% extends "base.html" %}

{% block title %}Session Entry - Tutor AI{% endblock %}

{% block content %}
<div class="form-container">
    <h1>⚡ Record New Session</h1>
    
    <form method="POST" action="{{ url_for('session.create_session') }}">
        <div class="form-group">
            <label for="student_id">Student <span style="color: red;">*</span></label>
            <select id="student_id" name="student_id" class="form-control" required>
                <option value="">Select a student...</option>
                {% for student in students %}
                <option value="{{ student.id }}" {% if selected_student_id == student.id %}selected{% endif %}>
                    {{ student.name }} (Age {{ student.age }})
                </option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="tutor_id">Tutor <span style="color: red;">*</span></label>
            <select id="tutor_id" name="tutor_id" class="form-control" required>
                <option value="">Select a tutor...</option>
                {% for tutor in tutors %}
                <option value="{{ tutor.id }}">{{ tutor.full_name }} ({{ tutor.username }})</option>
                {% endfor %}
            </select>
        </div>
        
        <div class="form-group">
            <label for="duration_minutes">Duration (minutes)</label>
            <input type="number" id="duration_minutes" name="duration_minutes" class="form-control" 
                   min="15" max="180" value="60" placeholder="e.g. 60">
            <small style="color: #666;">Optional - leave blank if not specified</small>
        </div>
        
        <div class="form-group">
            <label for="topics_covered">Topics Covered</label>
            <input type="text" id="topics_covered" name="topics_covered" class="form-control" 
                   placeholder="e.g. Fractions, Multiplication, etc.">
            <small style="color: #666;">What topics were worked on during this session?</small>
        </div>
        
        <div class="form-group">
            <label for="notes">Session Notes</label>
            <textarea id="notes" name="notes" class="form-control" rows="4" 
                      placeholder="How did the session go? Areas of difficulty, progress made, homework assigned, etc."></textarea>
        </div>
        
        <div style="text-align: center; margin: 30px 0;">
            <a href="{{ url_for('main.dashboard') }}" class="btn">Cancel</a>
            <button type="submit" class="btn btn-success">💾 Record Session</button>
        </div>
    </form>
</div>

{% if not students %}
<div class="welcome-message" style="background: #fff3cd; border-left: 4px solid #ffc107;">
    <h3>No students found!</h3>
    <p>You need to add students before you can record sessions.</p>
    <a href="{{ url_for('student.add_student') }}" class="btn btn-success">Add First Student</a>
</div>
{% endif %}

{% if not tutors %}
<div class="welcome-message" style="background: #fff3cd; border-left: 4px solid #ffc107;">
    <h3>No tutors found!</h3>
    <p>You need to add tutors before you can record sessions.</p>
    {% if current_user.username == 'admin' %}
    <a href="{{ url_for('tutor.add_tutor') }}" class="btn btn-success">Add First Tutor</a>
    {% endif %}
</div>
{% endif %}

<div class="nav-links">
    <a href="{{ url_for('main.dashboard') }}">🏠 Back to Dashboard</a>
    <a href="{{ url_for('student.list_students') }}">📚 Students</a>
</div>
{% endblock %}